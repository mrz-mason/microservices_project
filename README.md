```markdown
# Распределенная система с балансировкой нагрузки и мониторингом

## Описание проекта

Данный проект представляет собой распределенную систему, включающую балансировщик нагрузки, RPC Gateway для взаимодействия с микросервисами, микросервисы для выполнения операций, а также систему мониторинга с использованием Prometheus и Grafana.

## Структура проекта

```
microservices_project/
│
├── app/
│   ├── __init__.py              # Инициализация пакета
│   ├── rpc_gateway.py           # Реализация RPC Gateway
│   ├── load_balancer.py         # Реализация Load Balancer
│   └── services/                # Микросервисы
│       └── calc_service.py      # Сервис для выполнения математических операций
│
├── config/                      # Конфигурационные файлы
│   └── config.py                # Настройки сервера и RPC методов
│
├── logs/                        # Логи приложения
│   └── app.log                  # Файл для логов
│
├── requirements.txt             # Зависимости проекта
└── README.md                    # Описание проекта
```

### Компоненты системы

1. **Load Balancer**:
   - Балансировщик нагрузки принимает входящие HTTP-запросы и маршрутизирует их:
     - POST-запросы к `/rpc` направляются в RPC Gateway.
     - GET-запросы к `/static` (опционально) направляются в Static Gateway.

2. **RPC Gateway**:
   - Обрабатывает POST-запросы в формате JSON и направляет их в соответствующие микросервисы на основе метода, указанного в запросе.

3. **Микросервисы**:
   - Реализуют методы, такие как `calc.summ`, `calc.sub`, `calc.mult`, `calc.div`, для выполнения операций над числами.

4. **Мониторинг**:
   - Prometheus собирает метрики, такие как количество запросов, время обработки и ошибки.
   - Grafana визуализирует метрики для удобного мониторинга.

## Установка и запуск

### Установка

1. Клонируйте репозиторий:
   ```bash
   git clone <ссылка на ваш репозиторий>
   cd microservices_project
   ```

2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

### Запуск компонентов

1. Запустите Load Balancer:
   ```bash
   python app/load_balancer.py
   ```

2. Запустите RPC Gateway:
   ```bash
   python app/rpc_gateway.py
   ```

3. Запустите микросервис:
   ```bash
   python app/services/calc_service.py
   ```

4. Установите и запустите Prometheus и Grafana для мониторинга (инструкции в разделе ниже).

### Мониторинг

1. Установите [Prometheus](https://prometheus.io/) и [Grafana](https://grafana.com/).
2. Настройте Prometheus для сбора метрик с микросервисов.
3. Настройте Grafana для подключения к Prometheus и создания дашбордов для визуализации данных.

## Пример использования

### Запрос к RPC Gateway

Пример POST-запроса к `/rpc`:
```json
{
   "method": "calc.summ",
   "data": {
      "args": [1, 5, -8, 156, -24]
   },
   "requestId": "5545abec-aab1-4efa-80ef-b3491cb4b6c5"
}
```

### Ответ от микросервиса

Пример ответа:
```json
{
   "requestId": "5545abec-aab1-4efa-80ef-b3491cb4b6c5",
   "result": 130
}
```

## Технологии

- **Flask**: веб-фреймворк для микросервисов.
- **Prometheus**: сбор и хранение метрик.
- **Grafana**: визуализация метрик.
- **Python**: основной язык программирования.


---

**Автор**: [Чупроов Б.А. группа к0611-23]  

```
